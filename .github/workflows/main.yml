name: Deploy Frontend
on:
  push:
    branches:
      - "main"

jobs:
  deploy-frontend:
    runs-on: self-hosted
    steps:
      - run: |
          cd /home/Git/Rabbit
          git reset --hard
          git pull
          export NVM_DIR=~/.nvm
          source ~/.nvm/nvm.sh 
          cd frontend
          npm ci
          npm run build
          lftp sftp://${{ secrets.sftp_username }}:${{ secrets.sftp_password }}@${{ secrets.sftp_hostname }} -e "mirror --reverse ./build /; quit"
